#N canvas 274 87 949 513 12;
#N canvas 44 36 508 728 freeze 0;
#X obj 27 137 vasp.split 2;
#X obj 32 548 vasp.join 2;
#X obj 27 74 vasp.cfft @detach 1;
#X obj 34 604 vasp.c!fft @detach 1;
#X obj 25 13 inlet;
#X obj 91 230 * 0.01;
#X obj 302 17 inlet;
#X obj 26 107 vasp.polar @detach 1;
#X obj 34 575 vasp.rect @detach 1;
#X obj 29 321 vasp.gate @detach 1;
#X obj 98 407 vasp.noise @detach 1;
#X obj 31 519 vasp.sync;
#X obj 91 208 vasp.max? @detach 1;
#X obj 381 17 inlet;
#X obj 169 679 outlet;
#N canvas 238 212 336 266 non0 0;
#X obj 61 204 outlet;
#X obj 26 11 inlet;
#X obj 26 39 t a a;
#X obj 234 77 vasp.f?;
#X obj 46 98 vasp.!= 0 @detach 1;
#X obj 27 124 vasp.sum?;
#X obj 47 71 vasp.!;
#X obj 61 166 expr log10($f1/$f2)*20;
#X connect 1 0 2 0;
#X connect 2 0 5 0;
#X connect 2 1 3 0;
#X connect 3 0 7 1;
#X connect 4 0 5 0;
#X connect 5 1 7 0;
#X connect 6 0 4 0;
#X connect 7 0 0 0;
#X restore 170 652 pd non0;
#X obj 34 649 vasp.n 0;
#X obj 302 45 + 100;
#X obj 300 76 dbtorms;
#N canvas 445 282 506 356 cplx 0;
#X obj 19 229 vasp.join;
#X obj 19 73 t a b a;
#X obj 149 137 vasp.f?;
#X obj 19 14 inlet;
#X obj 19 258 outlet;
#X text 216 135 get length of source;
#X text 225 181 make immediate;
#X text 225 196 initialized to 0;
#X text 101 230 make complex vasp;
#X obj 87 176 vasp.! @detach 1;
#X obj 19 203 vasp.sync;
#X connect 0 0 4 0;
#X connect 1 0 10 0;
#X connect 1 1 9 0;
#X connect 1 2 2 0;
#X connect 2 0 9 1;
#X connect 3 0 1 0;
#X connect 9 0 10 1;
#X connect 10 0 0 0;
#X connect 10 1 0 1;
#X restore 27 43 pd cplx;
#X text 281 166 resample;
#X text 146 230 find spectral peak;
#X text 203 320 gate spectrum below threshold;
#X text 112 523 wait for threads to finish;
#X text 193 75 FFT;
#X text 195 100 -> polar;
#X text 193 572 -> cartesian;
#X text 203 600 inverse FFT;
#X text 160 389 randomize complex arguments;
#X text 234 650 get spectral density;
#X obj 28 168 vasp.xtilt 1 @detach 1 @inter 2;
#X obj 30 347 vasp.pow @detach 1;
#X obj 437 19 inlet;
#X text 194 347 treat spectrum exponentially;
#X obj 28 238 t a a;
#X obj 28 288 vasp;
#X obj 89 257 t b f;
#X obj 381 51 / -1200;
#X obj 381 77 t b f;
#X obj 382 129 pow;
#X msg 382 103 2;
#X obj 35 677 vasp.u;
#X obj 97 432 vasp.* 3.14159 @detach 1;
#X connect 0 0 30 0;
#X connect 0 1 10 0;
#X connect 1 0 8 0;
#X connect 2 0 7 0;
#X connect 3 0 16 0;
#X connect 4 0 19 0;
#X connect 5 0 36 0;
#X connect 6 0 17 0;
#X connect 7 0 0 0;
#X connect 8 0 3 0;
#X connect 9 0 31 0;
#X connect 10 0 42 0;
#X connect 11 0 1 0;
#X connect 11 1 1 1;
#X connect 12 0 5 0;
#X connect 13 0 37 0;
#X connect 15 0 14 0;
#X connect 16 0 41 0;
#X connect 17 0 18 0;
#X connect 18 0 5 1;
#X connect 19 0 2 0;
#X connect 30 0 34 0;
#X connect 31 0 11 0;
#X connect 31 0 15 0;
#X connect 32 0 31 1;
#X connect 34 0 12 0;
#X connect 34 1 35 1;
#X connect 35 0 9 0;
#X connect 36 0 35 0;
#X connect 36 1 9 1;
#X connect 37 0 38 0;
#X connect 38 0 40 0;
#X connect 38 1 39 1;
#X connect 39 0 30 1;
#X connect 40 0 39 0;
#X connect 42 0 11 1;
#X restore 18 331 pd freeze;
#X obj 76 200 nbx 6 18 -200 0 0 1 empty empty spectral_gate(dB) 0 -8
0 12 -225271 -1 -1 -200 256;
#X obj 76 236 nbx 7 18 -10000 10000 0 1 empty empty transpose(cents)
0 -8 0 12 -225271 -1 -1 0 256;
#X obj 448 278 bng 15 250 50 0 empty empty empty 0 -6 0 8 -262144 -1
-1;
#X obj 729 279 bng 15 250 50 0 empty empty empty 0 -6 0 8 -262144 -1
-1;
#N canvas 0 22 488 338 save 0;
#X obj 30 198 soundfiler;
#X obj 30 134 symbol;
#X obj 29 106 savepanel;
#X obj 32 8 inlet;
#X obj 27 232 outlet;
#X obj 30 42 route new again;
#X obj 29 73 t b;
#X obj 84 73 t b;
#X msg 27 169 write -bytes 3 -wave \$1 dst;
#X connect 0 0 4 0;
#X connect 1 0 8 0;
#X connect 2 0 1 0;
#X connect 3 0 5 0;
#X connect 5 0 6 0;
#X connect 5 1 7 0;
#X connect 6 0 2 0;
#X connect 7 0 1 0;
#X connect 8 0 0 0;
#X restore 729 250 pd save;
#N canvas 492 91 726 532 open 0;
#X obj 19 96 openpanel;
#X obj 21 6 inlet;
#X obj 16 495 outlet;
#X obj 20 123 symbol;
#X obj 18 467 vasp.u;
#X obj 18 363 t b;
#X obj 22 33 route new again;
#X obj 19 66 t b;
#X obj 74 66 t b;
#X msg 17 403 vasp src;
#X obj 75 360 s \$0-srclen;
#X obj 16 435 vasp.opt;
#X obj 19 322 soundfiler;
#X obj 230 11 inlet;
#X text 277 10 channel;
#X obj 20 298 list trim;
#X obj 20 274 list append src;
#X msg 20 246 read -maxsize 1e+08 -resize \$1;
#X obj 230 333 table \$0-src-dummy;
#X obj 229 64 list append \$0-src-dummy \$0-src-dummy \$0-src-dummy
\$0-src-dummy;
#X obj 230 38 t b a;
#X obj 229 106 t a a;
#X obj 229 134 list split;
#X obj 229 160 list append src;
#X obj 376 13 loadbang;
#X msg 376 37 0;
#X obj 230 185 list append;
#X obj 230 212 list split 4;
#X connect 0 0 3 0;
#X connect 1 0 6 0;
#X connect 3 0 17 0;
#X connect 4 0 2 0;
#X connect 5 0 9 0;
#X connect 6 0 7 0;
#X connect 6 1 8 0;
#X connect 7 0 0 0;
#X connect 8 0 3 0;
#X connect 9 0 11 0;
#X connect 11 0 4 0;
#X connect 12 0 5 0;
#X connect 12 0 10 0;
#X connect 13 0 20 0;
#X connect 15 0 12 0;
#X connect 16 0 15 0;
#X connect 17 0 16 0;
#X connect 19 0 21 0;
#X connect 20 0 19 0;
#X connect 20 1 22 1;
#X connect 21 0 22 0;
#X connect 21 1 26 1;
#X connect 22 0 23 0;
#X connect 23 0 26 0;
#X connect 24 0 25 0;
#X connect 25 0 20 0;
#X connect 26 0 27 0;
#X connect 27 0 16 1;
#X restore 448 250 pd open;
#X msg 381 222 stop;
#X msg 447 222 new;
#X msg 482 222 again;
#X msg 728 222 new;
#X msg 761 222 again;
#X msg 332 222 play;
#X obj 8 9 cnv 15 300 48 empty empty freeze 5 14 0 20 -233017 -66577
0;
#X text 128 13 make static sound;
#X obj 18 108 bng 25 250 50 0 empty empty do! 0 -6 0 12 -24198 -1 -1
;
#X obj 107 115 nbx 12 18 0 1e+08 0 1 empty empty length(frames) 0 -8
0 12 -225271 -1 -1 1e+07 256;
#X obj 19 375 nbx 9 14 -1e+37 1e+37 0 0 empty empty spectral_density(dB)
0 -6 0 10 -262131 -1 -1 -28.5749 256;
#X obj 332 197 cnv 15 100 20 empty empty play_src 5 8 0 10 -261681
-66577 0;
#X obj 447 197 cnv 15 100 20 empty empty read_src 5 8 0 10 -261681
-66577 0;
#X obj 727 197 cnv 15 100 20 empty empty write_dst 5 8 0 10 -261681
-66577 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array dst 1e+07 float 0;
#X coords 0 1 1e+07 -1 600 150 1;
#X restore 324 319 graph;
#X msg 663 223 stop;
#X msg 614 223 play;
#X obj 614 198 cnv 15 100 20 empty empty play_dst 5 8 0 10 -261681
-66577 0;
#N canvas 0 22 535 387 playsrc 0;
#X obj 17 274 dac~;
#X obj 19 21 inlet;
#X obj 17 49 route play;
#X obj 18 197 tabplay~ src;
#X obj 338 23 r \$0-srclen;
#X obj 166 22 r \$0-offs;
#X obj 249 22 r \$0-len;
#X obj 338 48 t b f;
#X obj 166 94 *;
#X obj 248 93 *;
#X obj 75 132 pack 0 0;
#X obj 19 81 t b;
#X obj 77 105 loadbang;
#X obj 113 274 outlet;
#X obj 18 237 *~;
#X obj 451 21 inlet;
#X obj 451 50 pack 0 30;
#X obj 451 78 line~;
#X obj 19 159 list;
#X connect 1 0 2 0;
#X connect 2 0 11 0;
#X connect 2 1 3 0;
#X connect 3 0 14 0;
#X connect 3 1 13 0;
#X connect 4 0 7 0;
#X connect 5 0 8 0;
#X connect 6 0 9 0;
#X connect 7 0 8 0;
#X connect 7 0 9 0;
#X connect 7 1 8 1;
#X connect 7 1 9 1;
#X connect 8 0 10 0;
#X connect 9 0 10 1;
#X connect 10 0 18 1;
#X connect 11 0 18 0;
#X connect 12 0 10 0;
#X connect 14 0 0 0;
#X connect 14 0 0 1;
#X connect 15 0 16 0;
#X connect 16 0 17 0;
#X connect 17 0 14 1;
#X connect 18 0 3 0;
#X restore 332 250 pd playsrc;
#N canvas 0 22 507 359 playdst 0;
#X obj 23 199 dac~;
#X obj 19 21 inlet;
#X obj 22 51 route play;
#X obj 21 83 tabplay~ dst;
#X obj 113 200 outlet;
#X obj 27 147 *~;
#X obj 171 27 inlet;
#X obj 171 56 pack 0 30;
#X obj 171 84 line~;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 2 1 3 0;
#X connect 3 0 5 0;
#X connect 3 1 4 0;
#X connect 5 0 0 0;
#X connect 5 0 0 1;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 8 0 5 1;
#X restore 614 251 pd playdst;
#N canvas 395 251 490 454 copy 0;
#X obj 27 26 inlet;
#X obj 27 48 t b b;
#X obj 316 19 inlet;
#X obj 25 401 outlet;
#X obj 26 269 vasp.f;
#X obj 26 241 vasp.o;
#X obj 128 31 r \$0-offs;
#X obj 211 31 r \$0-len;
#X obj 316 127 f 1e+06;
#X obj 366 21 loadbang;
#X obj 84 214 *;
#X obj 117 214 *;
#X obj 84 172 vasp.f?;
#X obj 27 146 t a a;
#X obj 27 299 vasp.sync;
#X obj 26 368 vasp.f -1;
#X text 167 328 copy src to dst;
#X text 108 368 take all dst;
#X text 311 233 resize dst buffer;
#X text 341 261 set to zero;
#X obj 185 262 vasp.= 0 @detach 1;
#X obj 26 327 vasp.-> @detach 1;
#X msg 27 83 vasp src;
#X obj 27 106 vasp;
#X msg 186 186 ref dst \, bang;
#X obj 187 214 vasp.s;
#X connect 0 0 1 0;
#X connect 1 0 22 0;
#X connect 1 1 24 0;
#X connect 2 0 8 0;
#X connect 4 0 14 0;
#X connect 5 0 4 0;
#X connect 6 0 10 1;
#X connect 7 0 11 1;
#X connect 8 0 25 1;
#X connect 9 0 8 0;
#X connect 10 0 5 1;
#X connect 11 0 4 1;
#X connect 12 0 10 0;
#X connect 12 0 11 0;
#X connect 13 0 5 0;
#X connect 13 1 12 0;
#X connect 14 0 21 0;
#X connect 14 1 21 1;
#X connect 15 0 3 0;
#X connect 20 0 14 1;
#X connect 21 1 15 0;
#X connect 22 0 23 0;
#X connect 23 0 13 0;
#X connect 24 0 25 0;
#X connect 25 0 20 0;
#X restore 18 157 pd copy;
#X text 85 160 copy and resize;
#X obj 323 170 hsl 600 15 0 1 0 1 \$0-r2 empty empty -2 -6 0 8 -262131
-1 -1 56800 0;
#X obj 323 5 hsl 600 15 0 1 0 1 \$0-r1 empty empty -2 -6 0 8 -262131
-1 -1 6600 0;
#N canvas 148 330 454 280 sel 0;
#X obj 30 25 r \$0-r1;
#X obj 110 25 r \$0-r2;
#X obj 30 100 min;
#X obj 113 100 max;
#X obj 30 53 t f f;
#X obj 110 50 t b b f;
#X obj 113 130 -;
#X obj 27 190 s \$0-offs;
#X obj 113 190 s \$0-len;
#X obj 114 161 * -1;
#X obj 212 191 s \$0-markregion;
#X obj 235 144 * 600;
#X msg 235 168 vis_size \$1 150;
#X msg 235 78 pos \$1 20;
#X obj 233 35 * 600;
#X obj 234 56 + 322;
#X connect 0 0 4 0;
#X connect 1 0 5 0;
#X connect 2 0 6 0;
#X connect 2 0 7 0;
#X connect 2 0 14 0;
#X connect 3 0 6 1;
#X connect 4 0 2 0;
#X connect 4 1 3 0;
#X connect 5 0 2 0;
#X connect 5 1 3 0;
#X connect 5 2 3 1;
#X connect 5 2 2 1;
#X connect 6 0 9 0;
#X connect 9 0 8 0;
#X connect 9 0 11 0;
#X connect 11 0 12 0;
#X connect 12 0 10 0;
#X connect 13 0 10 0;
#X connect 14 0 15 0;
#X connect 15 0 13 0;
#X restore 871 198 pd sel;
#X obj 76 271 nbx 7 18 0.01 100 1 1 empty empty power 0 -8 0 12 -225271
-1 -1 0.5 256;
#X obj 331 277 bng 15 250 50 0 empty empty empty 0 -6 0 8 -262144 -1
-1;
#X obj 613 277 bng 15 250 50 0 empty empty empty 0 -6 0 8 -262144 -1
-1;
#X text 161 199 -100... no gate;
#X text 165 268 1... no power;
#X obj 18 426 bng 25 250 50 0 empty empty normalize 0 -6 0 12 -24198
-1 -1;
#N canvas 0 22 486 336 normalize 0;
#X obj 127 29 loadbang;
#X msg 127 54 detach 1;
#X text 120 75 no attributes yet;
#X obj 39 115 vasp.opt;
#X obj 38 149 vasp.u;
#X obj 39 32 inlet;
#X obj 40 56 t b;
#X obj 40 82 vasp dst;
#X obj 39 177 outlet;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 8 0;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 7 0 3 0;
#X restore 18 454 pd normalize;
#X obj 593 220 vsl 15 70 0.01 10 1 1 empty empty empty 0 -8 0 8 -262144
-1 -1 1900 1;
#X obj 312 221 vsl 15 70 0.01 10 1 1 empty empty empty 0 -8 0 8 -262144
-1 -1 2200 1;
#X obj 388 20 cnv 10 502 150 empty \$0-markregion empty 20 12 0 14
-225271 -33289 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array src 2.54999e+06 float 0;
#X coords 0 1 2.54998e+06 -1 600 150 1;
#X restore 322 20 graph;
#X obj 18 476 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 2 374 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X text 11 37 (C)2002-2010 Thomas Grill;
#X obj 512 260 hradio 15 1 0 4 empty empty channel 0 -8 0 10 -262144
-1 -1 1;
#X connect 0 0 17 0;
#X connect 1 0 0 1;
#X connect 2 0 0 2;
#X connect 5 0 4 0;
#X connect 6 0 3 0;
#X connect 7 0 25 0;
#X connect 8 0 6 0;
#X connect 9 0 6 0;
#X connect 10 0 5 0;
#X connect 11 0 5 0;
#X connect 12 0 25 0;
#X connect 15 0 27 0;
#X connect 16 0 27 1;
#X connect 17 0 44 0;
#X connect 22 0 26 0;
#X connect 23 0 26 0;
#X connect 25 0 33 0;
#X connect 26 0 34 0;
#X connect 27 0 0 0;
#X connect 32 0 0 3;
#X connect 33 0 12 0;
#X connect 34 0 23 0;
#X connect 37 0 38 0;
#X connect 38 0 43 0;
#X connect 39 0 26 1;
#X connect 40 0 25 1;
#X connect 46 0 6 1;
